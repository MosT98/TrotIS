@page "/register"
@inject HttpClient Http
@using TrotIS.Shared
@inject NavigationManager navManager


<h3>Register</h3>

<div class="row">
    <div class="col-md-4">
        <form method="post">
                <input type="email" name="email" @bind="user.Email"><br>
                <input type="password" name="password" @bind="user.Password"><br>
                <input type="text" name="firstname"  @bind="user.FirstName"><br>
                <input type="text" name="lastname"  @bind="user.LastName"><br>
                <input type="text" name="phone"  @bind="user.Phone"><br>
                <input type="date" name="birthday"  @bind="user.BirthDay"><br>
                <input type="text" name="socialclass"  @bind="user.SocialClass"><br>
                <button  @onclick="@RegisterUser">Register</button>
            </form>
    </div>
</div>

<div>
    <a asp-page="Index">Back to List</a>
</div>

@code {

    private string apiUrl = "https://localhost:5002/api/user";
    private User user = new User();
    private void RegisterUser()
    {
        user.UserId = Guid.NewGuid();
        user.Address = null;
        Http.PostAsJsonAsync(apiUrl, user);
        navManager.NavigateTo("/", true);
    }

    public class User
    {
        public Guid UserId { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Phone { get; set; }
        public DateTime BirthDay { get; set; }
        public EnumLists.SocialClass SocialClass { get; set; }
        public virtual Address Address { get; set; }
    }

}
